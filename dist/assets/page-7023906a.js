var v=Object.defineProperty;var y=(r,t,l)=>t in r?v(r,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[t]=l;var i=(r,t,l)=>(y(r,typeof t!="symbol"?t+"":t,l),l);import{c as k,u as C,r as S,a,N as F,j as o,L as U,J as j,K as I,M as x}from"./index-3db8ba88.js";import{u as L}from"./useFetch-6f7c80d5.js";import{u as D,V as R}from"./useFormValues-36257fb6.js";import{I as d}from"./input.component-4b4e7284.js";import{A,U as V}from"./auth.service-083d6681.js";import{u as $}from"./useDispatch-1d77a426.js";class q{constructor(){i(this,"clinic_name");i(this,"first_name");i(this,"last_name");i(this,"email");i(this,"password");i(this,"repeat_password");i(this,"acept_terms");i(this,"phone_number");this.clinic_name="",this.first_name="",this.last_name="",this.email="",this.password="",this.repeat_password="",this.acept_terms=!1,this.phone_number=""}}const z=(r,t,l)=>{let s=!1;return r.first_name.length?t(e=>({...e,first_name:""})):(t(e=>({...e,first_name:"Este campo es obligatorio."})),s=!0),r.last_name.length?t(e=>({...e,last_name:""})):(t(e=>({...e,last_name:"Este campo es obligatorio."})),s=!0),r.email.length?r.email.length>0&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(r.email)?(t(e=>({...e,email:"Correo electrónico inválido."})),s=!0):t(e=>({...e,email:""})):(t(e=>({...e,email:"Este campo es obligatorio."})),s=!0),r.password.length?r.password.length>0&&r.password.length<7?(t(e=>({...e,password:"Debe tener al menos 8 caracteres."})),s=!0):t(e=>({...e,password:""})):(t(e=>({...e,password:"Este campo es obligatorio."})),s=!0),r.repeat_password!==r.password&&(t(e=>({...e,repeat_password:"Las contraseñas no coinciden."})),s=!0),l&&(r.phone_number.length?t(e=>({...e,phone_number:""})):(t(e=>({...e,phone_number:"Este campo es obligatorio."})),s=!0)),s};function B(){const r=k(),t=$(),l=C(m=>m.user),{values:s,handleChangeInput:e,errors:c,setErrors:f}=D(new q),[p,w]=S.useState(!0),{callEndpoint:u,error:b}=L(),_=async m=>{if(m.preventDefault(),z(s,f,p))return;const N=p?x.signup_as_expert:x.signup,{response:n}=await u(A(s,N));if(!(n!=null&&n.access_token))return;const{response:h}=await u(V(j.me,n==null?void 0:n.access_token));h&&(h.data.token=n==null?void 0:n.access_token,t(I(h==null?void 0:h.data))),r("/")},g=m=>w(m);return l._id?a(F,{to:"/"}):o("main",{className:"min-h-screen bg-white-bg overflow-hidden relative grid grid-cols-1 lg:grid-cols-2",children:[o("div",{className:"lg:flex-1 w-full min-h-screen h-full hidden lg:block relative ",children:[a("img",{src:"/assets/images/bg-login.jpg",width:300,height:300,alt:"blob",className:"w-full h-full object-cover absolute inset-0 bg-fixed"}),a("div",{className:"overlay  w-full absolute z-30 insert-0 h-full bg-text-90 opacity-25"})]}),o("div",{className:"relative w-full lg:flex-1 lg:px-16 overflow-hidden",children:[a("img",{src:"/assets/images/blob-sign-2.svg",width:300,height:300,alt:"blob",className:"absolute -top-28 -right-16"}),o("div",{className:"head py-20",children:[a("h2",{className:" text-text-100 text-xl text-center mb-6 font-bold",children:"¡Qué bueno verte aquí!"}),a("h4",{className:"text-text-100 text-center font-bold mt-14",children:"Regístrate como:"}),o("div",{className:"flex justify-center w-fit gap-4 mx-auto",children:[a("button",{className:`${p?"bg-primary text-primary text-white":"text-primary border-2"} font-bold text-center text-md block  rounded-xl py-1 px-6  hover:opacity-75 mt-4`,onClick:()=>g(!0),children:"Fuelancer"}),a("button",{className:`${p?"text-primary border-2":"bg-primary text-primary text-white border-[rgb(24, 194, 156)]"} font-bold text-center text-md block mx-auto rounded-xl py-1 px-6  hover:opacity-75 mt-4`,onClick:()=>g(!1),children:"Clínica"})]})]}),o("form",{className:"content-form max-w-sm mx-auto",onSubmit:_,children:[!p&&a(d,{data:{label:"Nombre de la clínica",name:"clinic_name",value:s.clinic_name,placeholder:"Hair recovery",onChange:e,error:c.clinic_name}}),a(d,{data:{label:"Nombre",name:"first_name",value:s.first_name,placeholder:"Lucia",onChange:e,error:c.first_name}}),a(d,{data:{label:"Apellido",name:"last_name",value:s.last_name,placeholder:"Lapor Rivas",onChange:e,error:c.last_name}}),a(d,{data:{label:"Correo electrónico",name:"email",value:s.email,placeholder:"lucia@example.com",onChange:e,error:c.email}}),a(d,{data:{label:"Contraseña",name:"password",value:s.password,placeholder:"********",type:"password",onChange:e,error:c.password}}),a(d,{data:{label:"Repetir contraseña",name:"repeat_password",value:s.repeat_password,placeholder:"********",type:"password",onChange:e,error:c.repeat_password}}),a(d,{data:{label:"Número de teléfono",name:"phone_number",value:s.phone_number,placeholder:"+12 3456 789",onChange:m=>e(m,R.number),error:c.phone_number}}),a("button",{type:"submit",className:"btn btn-primary w-72 block mx-auto mt-6",children:"Registrarse"}),b!==null?a("span",{className:"text-sm text-alert-danger block text-center mt-4",children:b.error}):null]}),o("div",{className:"flex mt-10 mx-auto w-4/5 items-center gap-2",children:[a("hr",{className:"flex-1 border-text-50 block"}),a("span",{className:"flex-2 text-sm text-text-90",children:"O inicia sesión con"}),a("hr",{className:"flex-1 border-text-50 block"})]}),a("div",{className:"my-10 w-72 mx-auto",children:o("span",{className:"text-xs text-center text-text-90 block",children:["¿Ya tienes una cuenta?,"," ",a("strong",{className:"text-primary",children:a(U,{to:"/signin",children:"Iniciar sesión"})})]})}),a("img",{src:"/assets/images/blob-sign.svg",width:300,height:300,alt:"blob",className:"absolute -bottom-28 -left-16"})]})]})}export{B as default};
