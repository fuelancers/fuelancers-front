var I=Object.defineProperty;var C=(a,t,n)=>t in a?I(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;var c=(a,t,n)=>(C(a,typeof t!="symbol"?t+"":t,n),n);import{c as S,u as j,a as e,N as D,j as l,L as F,J as O,K as U,M as A}from"./index-23031116.js";import{u as L}from"./useFetch-1f74a4af.js";import{u as M}from"./useFormValues-c51c07f2.js";import{I as N}from"./input.component-1ba2f11f.js";import{A as q,U as z}from"./auth.service-e361fbc3.js";import{u as E}from"./useDispatch-a52118b3.js";const J=(a,t)=>{let n=!1;return a.email.length?a.email.length>0&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a.email)?(t(s=>({...s,email:"Ingresa un correo electrónico válido"})),n=!0):t(s=>({...s,email:""})):(t(s=>({...s,email:"Este campo es obligatorio"})),n=!0),a.password.length?a.password.length>0&&a.password.length<5?(t(s=>({...s,password:"Debe tener al menos 8 caracteres"})),n=!0):t(s=>({...s,password:""})):(t(s=>({...s,password:"Este campo es obligatorio"})),n=!0),n};class K{constructor(){c(this,"email");c(this,"password");c(this,"keep_session");this.email="",this.password="",this.keep_session=[]}}function T(){var g,x;const a=S(),t=E(),n=j(m=>m.user),{values:s,handleChangeCheckbox:k,handleChangeInput:d,errors:h,setErrors:_}=M(new K),{callEndpoint:p,error:i}=L(),y=async m=>{var b,f,w,v;if(m.preventDefault(),J(s,_))return;const u=Object.assign({},s);u.keep_session=!!s.keep_session.length;const o=await p(q(u,A.signin));if(!((b=o==null?void 0:o.response)!=null&&b.access_token))return;console.log((f=o==null?void 0:o.response)==null?void 0:f.access_token);const{response:r}=await p(z(O.me,(w=o==null?void 0:o.response)==null?void 0:w.access_token));r&&(r.data.token=(v=o==null?void 0:o.response)==null?void 0:v.access_token,t(U(r==null?void 0:r.data))),a("/")};return n._id?e(D,{to:"/"}):l("main",{className:"min-h-screen bg-white-bg overflow-hidden relative grid grid-cols-1 lg:grid-cols-2 ",children:[l("div",{className:"lg:flex-1 w-full h-screen relative hidden lg:block",children:[e("img",{src:"/assets/images/bg-login.jpg",width:300,height:300,alt:"blob",className:"w-full h-full object-cover absolute"}),e("div",{className:"overlay  w-full absolute z-30 insert-0 h-full bg-text-90 opacity-25"})]}),l("div",{className:"relative w-full lg:flex-1 lg:px-16 overflow-hidden",children:[e("img",{src:"/assets/images/blob-sign-2.svg",width:300,height:300,alt:"blob",className:"absolute -top-28 -right-16"}),l("div",{className:"head py-20",children:[e("h2",{className:" text-text-100 text-xl text-center mb-6 font-bold",children:"¡Qué bueno verte aquí!"}),e("h4",{className:"text-text-100 text-center font-bold",children:"Iniciar sesión"})]}),l("form",{className:"content-form max-w-sm mx-auto",onSubmit:y,children:[e(N,{data:{label:"Correo electrónico",name:"email",value:s.email,placeholder:"lucia@example.com",type:"text",onChange:d,error:h.email}}),e(N,{data:{label:"Contraseña",name:"password",value:s.password,placeholder:"********",type:"password",onChange:d,error:h.password},children:e("span",{className:"text-xs text-text-70 hover:text-text-90 text-right px-4",children:"¿Olvidaste tu contraseña?"})}),l("div",{className:"content-check w-11/12 mx-auto flex items-center",children:[e("input",{type:"checkbox",name:"keep_session",id:"keep_session",checked:!!s.keep_session.length,onChange:()=>k("keep_session","1")}),e("label",{htmlFor:"keep_session",className:"text-sm font-bold text-text-90 inline-block ml-2",children:"¿Mantener sesión abierta?"})]}),e("button",{type:"submit",className:"uppercase rounded-md border-none bg-primary text-white text-center w-72 block mx-auto py-2.5 px-4 font-bold mt-6 hover:bg-primary-hover outline-none",children:"Iniciar sesión"}),i!==null?e("span",{className:"text-sm text-alert-danger block text-center mt-4",children:(x=(g=i==null?void 0:i.error)==null?void 0:g.response)==null?void 0:x.error}):null]}),l("div",{className:"flex mt-10 mx-auto w-4/5 items-center gap-2",children:[e("hr",{className:"flex-1 border-text-50 block"}),e("span",{className:"flex-2 text-sm text-text-90",children:"O inicia sesión con"}),e("hr",{className:"flex-1 border-text-50 block"})]}),e("div",{className:"my-10 w-72 mx-auto",children:l("span",{className:"text-xs text-center text-text-90 block",children:["¿No tienes una cuenta?,"," ",e("strong",{className:"text-primary",children:e(F,{to:"/signup",children:"Regístrate ahora"})})," "]})}),e("img",{src:"/assets/images/blob-sign.svg",width:300,height:300,alt:"blob",className:"absolute -bottom-28 -left-16"})]})]})}export{T as default};
